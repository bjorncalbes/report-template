<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leads & Conversion - Hurwitz Law Group</title>
    <style>
        :root {
            --sidebar-width: 240px;
            --accent-color: #0445ac;
            --text-primary: #0b1e3d;
            --text-secondary: rgba(11, 30, 61, 0.72);
            --surface-color: rgba(244, 246, 250, 0.82);
            --surface-hover: rgba(4, 69, 172, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', sans-serif;
            background: linear-gradient(180deg, #f5f5f7 0%, #e9ecf2 100%);
            min-height: 100vh;
            display: flex;
            color: var(--text-primary);
        }
        nav.sidebar {
            --sidebar-width: 240px;
            --accent-color: #0445ac;
            --text-primary: #0b1e3d;
            --text-secondary: rgba(11, 30, 61, 0.72);
            --surface-color: rgba(244, 246, 250, 0.82);
            --surface-hover: rgba(4, 69, 172, 0.12);
        }



        .sidebar {
            width: var(--sidebar-width);
            background: var(--surface-color);
            height: 100vh;
            min-height: 100vh;
            padding: 32px 24px;
            border-right: 1px solid rgba(60, 60, 67, 0.18);
            box-shadow: none;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            overflow-y: auto;
            overflow-x: hidden;
            scrollbar-width: none;
            backdrop-filter: blur(26px);
        }


        .sidebar-header {
            text-align: center;
            margin-bottom: 28px;
            padding-bottom: 24px;
            border-bottom: 1px solid rgba(60, 60, 67, 0.12);
        }

        .sidebar-logo {
            max-width: 72px;
            height: auto;
            filter: none;
        }

        .nav-menu {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 6px;
            width: 100%;
            align-items: flex-start;
        }

        .nav-item {
            margin: 0;
        }

        .nav-link {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 12px;
            text-align: left;
            width: 100%;
            padding: 10px 14px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 500;
            transition: transform 0.3s ease, background 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
            filter: none;
        }

        .nav-link:hover {
            color: var(--text-primary);
            background: var(--surface-hover);
            transform: translateX(6px);
        }

        .nav-link.active {
            color: var(--accent-color);
            background: rgba(10, 132, 255, 0.16);
            box-shadow: inset 0 0 0 1px rgba(10, 132, 255, 0.32);
            transform: translateX(6px);
        }

        .nav-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.5);
        }

        .nav-icon svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 1.6;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }

        .nav-label {
            flex: 1;
            white-space: nowrap;
        }

        .nav-divider {
            height: 1px;
            background: rgba(60, 60, 67, 0.12);
            margin: 28px 0 18px 0;
            width: 100%;
        }

        .pdf-export-btn {
            margin-top: auto;
            padding-top: 18px;
            border-top: 1px solid rgba(60, 60, 67, 0.12);
        }

        .pdf-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: #ffffff;
            text-decoration: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            background: linear-gradient(135deg, #0a84ff 0%, #5ac8fa 100%);
            box-shadow: 0 12px 30px rgba(10, 132, 255, 0.35);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .pdf-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 16px 36px rgba(10, 132, 255, 0.45);
        }

.main-content {
            margin-left: var(--sidebar-width);
            padding: 0;
            width: calc(100% - var(--sidebar-width));
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: clamp(48px, 8vw, 88px) clamp(24px, 3vw, 48px);
        }

        .header {
            margin-bottom: 56px;
            text-align: left;
        }

        .header h1 {
            font-size: clamp(40px, 5vw, 56px);
            font-weight: 700;
            letter-spacing: -0.02em;
            color: #1d1d1f;
            margin-bottom: 16px;
            line-height: 1.1;
        }

        .divider {
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-color) 0%, #5ac8fa 100%);
            border-radius: 2px;
            margin: 0;
        }

        .container > h2 {
            font-size: clamp(28px, 3.5vw, 36px);
            color: #1d1d1f;
            font-weight: 700;
            margin-bottom: 16px;
            margin-top: 48px;
            letter-spacing: -0.02em;
        }

        .year-badge {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            background: rgba(4, 69, 172, 0.08);
            color: var(--accent-color);
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 24px;
            border: 1px solid rgba(4, 69, 172, 0.15);
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.85);
            border-radius: 16px;
            padding: 32px;
            margin: 24px 0;
            box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04), 0 1px 4px rgba(0, 0, 0, 0.02);
            border: 1px solid rgba(0, 0, 0, 0.06);
        }

        .chart-container canvas {
            max-height: 400px;
        }

        .sources-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04), 0 1px 4px rgba(0, 0, 0, 0.02);
            border: 1px solid rgba(0, 0, 0, 0.06);
            margin-bottom: 24px;
        }

        .sources-table thead {
            background: linear-gradient(180deg, #f8f9fb 0%, #f0f2f5 100%);
        }

        .sources-table th {
            padding: 16px 20px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
            color: rgba(29, 29, 31, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }

        .sources-table th:not(:first-child) {
            text-align: center;
        }

        .sources-table td {
            padding: 16px 20px;
            font-size: 15px;
            color: #1d1d1f;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .sources-table td:not(:first-child) {
            text-align: center;
        }

        .sources-table tbody tr:last-child td {
            border-bottom: none;
        }

        .sources-table tbody tr:hover {
            background: rgba(4, 69, 172, 0.03);
        }

        .sources-table tbody tr[draggable="true"] {
            cursor: move;
            transition: all 0.2s ease;
        }

        .sources-table tbody tr[draggable="true"]:active {
            opacity: 0.5;
        }

        .sources-table tbody tr.drag-over {
            border-top: 3px solid var(--accent-color);
        }

        .sources-table tbody tr.dragging {
            opacity: 0.4;
            background: rgba(4, 69, 172, 0.1);
        }

        .source-name {
            font-weight: 600;
        }

        .percentage-cell {
            font-weight: 600;
            color: var(--accent-color);
        }

        .total-row {
            background: linear-gradient(180deg, #f8f9fb 0%, #f0f2f5 100%);
            font-weight: 700;
        }

        .total-row:hover {
            background: linear-gradient(180deg, #f8f9fb 0%, #f0f2f5 100%) !important;
        }

        .table-scroll {
            overflow-x: visible;
            margin: 24px 0;
        }

        .landing-table {
            width: 100%;
            table-layout: fixed;
            border-collapse: separate;
            border-spacing: 0;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04), 0 1px 4px rgba(0, 0, 0, 0.02);
            border: 1px solid rgba(0, 0, 0, 0.06);
        }

        .landing-table thead {
            background: linear-gradient(180deg, #f8f9fb 0%, #f0f2f5 100%);
        }

        .landing-table th {
            padding: 16px 20px;
            font-size: 13px;
            font-weight: 600;
            color: rgba(29, 29, 31, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }

        .landing-table td {
            padding: 16px 20px;
            font-size: 15px;
            color: #1d1d1f;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .landing-table th:not(:first-child),
        .landing-table td:not(:first-child) {
            text-align: center;
        }

        .landing-table th:first-child,
        .landing-table td:first-child {
            width: 32%;
        }

        .landing-table tbody tr:last-child td {
            border-bottom: none;
        }

        .landing-table tbody tr:hover {
            background: rgba(4, 69, 172, 0.03);
        }

        .landing-table a {
            color: inherit;
            text-decoration: none;
            display: inline-block;
            line-height: 1.4;
            overflow-wrap: anywhere;
        }

        .landing-table a:hover {
            color: var(--accent-color);
            text-decoration: underline;
        }

        .landing-table .has-leads {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 44px;
            padding: 6px 12px;
            border-radius: 14px;
            background: #e6ffe6;
            color: #155724;
            font-weight: 700;
        }

        .insight-panel {
            background: linear-gradient(145deg, rgba(4, 69, 172, 0.95), rgba(10, 132, 255, 0.9));
            border-radius: 20px;
            padding: 28px 32px;
            margin: 40px 0 28px;
            box-shadow: 0 24px 48px rgba(4, 69, 172, 0.3), 0 4px 16px rgba(4, 69, 172, 0.2);
            border: 1px solid rgba(4, 69, 172, 0.3);
            backdrop-filter: blur(24px);
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 24px;
        }

        .insight-icon {
            width: 56px;
            height: 56px;
            border-radius: 18px;
            background: rgba(255, 255, 255, 0.2);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3), 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .insight-icon svg {
            width: 28px;
            height: 28px;
            stroke: currentColor;
            stroke-width: 1.6;
            fill: none;
        }

        .insight-title {
            font-size: 24px;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: -0.02em;
        }

        .insight-subtitle {
            font-size: 15px;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 6px;
        }

        .insight-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .insight-item {
            padding: 20px 24px;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 1), 0 10px 24px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .insight-item h3 {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            letter-spacing: -0.01em;
        }

        .insight-item p {
            font-size: 14px;
            color: rgba(11, 30, 61, 0.72);
            line-height: 1.6;
        }

        .highlight-callout {
            background: linear-gradient(135deg, rgba(52, 199, 89, 0.08) 0%, rgba(48, 209, 88, 0.05) 100%);
            border-left: 4px solid #34c759;
            border-radius: 16px;
            padding: 20px 24px;
            margin: 24px 0;
            box-shadow: 0 2px 12px rgba(52, 199, 89, 0.08);
        }

        .highlight-callout-text {
            font-size: 15px;
            line-height: 1.6;
            color: #1d1d1f;
        }

        .benchmark-box {
            background: linear-gradient(135deg, rgba(4, 69, 172, 0.95) 0%, rgba(10, 132, 255, 0.9) 100%);
            border-radius: 16px;
            padding: 32px 24px;
            margin: 24px 0;
            text-align: center;
            box-shadow: 0 8px 24px rgba(4, 69, 172, 0.3), 0 2px 8px rgba(4, 69, 172, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .benchmark-icon {
            width: 48px;
            height: 48px;
            color: #ffffff;
            margin: 0 auto 16px;
            display: block;
            filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.15));
        }

        .benchmark-text {
            font-size: 14px;
            color: #ffffff;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .benchmark-value {
            font-size: 36px;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: -0.02em;
        }

        .data-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04), 0 1px 4px rgba(0, 0, 0, 0.02);
            border: 1px solid rgba(0, 0, 0, 0.06);
            margin: 32px 0;
        }

        .data-table thead {
            background: linear-gradient(180deg, #f8f9fb 0%, #f0f2f5 100%);
        }

        .data-table th {
            padding: 16px 20px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
            color: rgba(29, 29, 31, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }

        .data-table td {
            padding: 14px 20px;
            font-size: 15px;
            color: #1d1d1f;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .data-table tbody tr:last-child td {
            border-bottom: none;
        }

        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, rgba(4, 69, 172, 0), rgba(4, 69, 172, 0.2), rgba(4, 69, 172, 0));
            border-radius: 999px;
            margin: 40px 0;
            box-shadow: 0 12px 24px rgba(4, 69, 172, 0.08);
        }

        .label-cell {
            font-weight: 600;
            color: #1d1d1f;
        }

        .data-cell {
            font-weight: 500;
            color: rgba(29, 29, 31, 0.8);
            cursor: text;
            transition: all 0.2s ease;
        }

        .data-cell:hover {
            background: rgba(4, 69, 172, 0.05);
        }

        .data-cell:focus {
            outline: 2px solid var(--accent-color);
            outline-offset: -2px;
            background: rgba(4, 69, 172, 0.08);
        }

        .data-cell[contenteditable="true"] {
            min-width: 60px;
        }

        .cvr-cell {
            font-weight: 600;
            color: var(--accent-color);
        }

        .cvr-row {
            background: rgba(0, 0, 0, 0.04) !important;
            font-weight: 700;
        }

        .cvr-row:hover {
            background: rgba(0, 0, 0, 0.06) !important;
        }

        .cvr-row td {
            font-weight: 700;
            color: var(--accent-color);
        }

        .input-field {
            width: 100%;
            max-width: 120px;
            padding: 8px 12px;
            font-size: 15px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', sans-serif;
            color: #1d1d1f;
            background: #ffffff;
            border: 1.5px solid rgba(0, 0, 0, 0.12);
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(4, 69, 172, 0.1);
        }

        .text-area {
            width: 100%;
            min-height: 140px;
            padding: 18px;
            font-size: 15px;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', sans-serif;
            color: #1d1d1f;
            background: rgba(255, 255, 255, 0.85);
            border: 1.5px solid rgba(0, 0, 0, 0.12);
            border-radius: 16px;
            resize: vertical;
            transition: all 0.2s ease;
            line-height: 1.6;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.03);
        }

        .text-area:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 4px rgba(4, 69, 172, 0.1), 0 2px 12px rgba(0, 0, 0, 0.05);
            background: #ffffff;
        }

        .text-area::placeholder {
            color: rgba(60, 60, 67, 0.6);
        }

        .section-header {
            font-size: clamp(28px, 3.5vw, 36px);
            color: #1d1d1f;
            font-weight: 700;
            margin-bottom: 20px;
            margin-top: 64px;
            letter-spacing: -0.02em;
        }


        @media (max-width: 768px) {
            .container {
                padding: 32px 24px;
            }

            .table-scroll {
                overflow-x: auto;
            }

            .sources-table,
            .landing-table,
            .data-table {
                font-size: 14px;
            }

            .sources-table th,
            .sources-table td,
            .landing-table th,
            .landing-table td,
            .data-table th,
            .data-table td {
                padding: 12px 16px;
            }

            .insight-panel {
                padding: 24px;
            }

            .insight-grid {
                gap: 16px;
            }

            .insight-item {
                padding: 18px 20px;
            }
        }

        .sidebar::-webkit-scrollbar {
            width: 0;
            height: 0;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: transparent;
        }

    </style>
</head>
<body>
        <nav class="sidebar">
        <div class="sidebar-header">
            <img src="https://lionheadmarketing.com/wp-content/uploads/2023/05/cropped-LHD_Favicon-1-192x192.png" alt="Lion Head Digital" class="sidebar-logo">
        </div>
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="page1.html" class="nav-link" data-page="page1.html" title="High Level Strategy">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <circle cx="12" cy="12" r="8" />
                        <path d="M8.5 15.5l7-7" />
                        <path d="M14.5 8h3v3" />
                        <path d="M11 11l2 2" />
                    </svg>
                    </span>
                    <span class="nav-label">High Level Strategy</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page2.html" class="nav-link" data-page="page2.html" title="Executive Summary">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <rect x="5" y="3" width="14" height="18" rx="2" />
                        <path d="M9 7h6" />
                        <path d="M8 11h8" />
                        <path d="M8 14l2.2-2.2 1.8 1.4 3-3" />
                        <path d="M8 18h8" />
                    </svg>
                    </span>
                    <span class="nav-label">Executive Summary</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page3.html" class="nav-link" data-page="page3.html" title="Client Goals">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <circle cx="12" cy="12" r="8" />
                        <circle cx="12" cy="12" r="4.5" />
                        <path d="M12 7v2" />
                        <path d="M12 15v2" />
                        <path d="M7 12h2" />
                        <path d="M15 12h2" />
                    </svg>
                    </span>
                    <span class="nav-label">Client Goals</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page4.html" class="nav-link" data-page="page4.html" title="Wins">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M9 6h6" />
                        <path d="M8 7v1a4 4 0 0 0 4 4 4 4 0 0 0 4-4V7" />
                        <path d="M10 14h4" />
                        <path d="M9 17h6" />
                        <path d="M8 21h8" />
                        <path d="M5.5 8H8" />
                        <path d="M16 8h2.5" />
                    </svg>
                    </span>
                    <span class="nav-label">Wins</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page5.html" class="nav-link" data-page="page5.html" title="Leads & Conversion">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M5 16l3.5-3.5 3 3L19 8" />
                        <path d="M16 7h3v3" />
                        <path d="M5 20h14" />
                    </svg>
                    </span>
                    <span class="nav-label">Leads & Conversion</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page6.html" class="nav-link" data-page="page6.html" title="Issues & Challenges">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12 5l7 12H5z" />
                        <path d="M12 11v3" />
                        <path d="M12 17h.01" />
                    </svg>
                    </span>
                    <span class="nav-label">Issues & Challenges</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page7.html" class="nav-link" data-page="page7.html" title="Competition">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M7 4h10v3a4 4 0 0 1-4 4h-2a4 4 0 0 1-4-4z" />
                        <path d="M12 11v3" />
                        <path d="M10 17h4" />
                        <path d="M9 20h6" />
                        <path d="M7 7H5a2 2 0 0 0 2 2" />
                        <path d="M17 7h2a2 2 0 0 1-2 2" />
                    </svg>
                    </span>
                    <span class="nav-label">Competition</span>
                </a>
            </li>
            <li class="nav-divider" aria-hidden="true"></li>
            <li class="nav-item">
                <a href="page8.html" class="nav-link" data-page="page8.html" title="HLS Overview">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <rect x="3" y="4" width="18" height="16" rx="2" />
                        <path d="M3 10h18" />
                        <path d="M9 10v10" />
                        <path d="M15 10v10" />
                        <path d="M9 14h3" />
                    </svg>
                    </span>
                    <span class="nav-label">HLS Overview</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page9.html" class="nav-link" data-page="page9.html" title="GBP Reviews">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12 21c-3.7-3.5-5.5-6.2-5.5-9.3a5.5 5.5 0 1 1 11 0c0 3.1-1.8 5.8-5.5 9.3z" />
                        <path d="M12 9.2l1 2h2.2l-1.8 1.2.6 2-2-1.5-2 1.5.6-2-1.8-1.2H11z" />
                    </svg>
                    </span>
                    <span class="nav-label">GBP Reviews</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page10.html" class="nav-link" data-page="page10.html" title="Content">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M8 4h6l4 4v10a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3z" />
                        <path d="M14 4v4h4" />
                        <path d="M9 13h6" />
                        <path d="M9 17h5" />
                    </svg>
                    </span>
                    <span class="nav-label">Content</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page11.html" class="nav-link" data-page="page11.html" title="Backlinks">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M9.5 14.5l-2 2a3.5 3.5 0 1 1-5-5l3-3" />
                        <path d="M14.5 9.5l2-2a3.5 3.5 0 1 1 5 5l-3 3" />
                        <path d="M9 9l6 6" />
                    </svg>
                    </span>
                    <span class="nav-label">Backlinks</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page12.html" class="nav-link" data-page="page12.html" title="Brand Name">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M7 5h6l6 6-6 6H7a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2z" />
                        <circle cx="9.5" cy="9.5" r="1.5" />
                        <path d="M13.5 12.5l1.1 2.1 2.3.3-1.7 1.7.4 2.3-2.1-1.1-2.1 1.1.4-2.3-1.7-1.7 2.3-.3z" />
                    </svg>
                    </span>
                    <span class="nav-label">Brand Name</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page13.html" class="nav-link" data-page="page13.html" title="E-E-A-T">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12 3 5 6v6c0 5 3.5 8.5 7 9 3.5-.5 7-4 7-9V6z" />
                        <path d="M12 10.5l1 2 2.2.3-1.6 1.6.4 2.2-2-1.1-2 1.1.4-2.2-1.6-1.6 2.2-.3z" />
                    </svg>
                    </span>
                    <span class="nav-label">E-E-A-T</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page14.html" class="nav-link" data-page="page14.html" title="Optimizing for AI">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M9.5 4.5a3.5 3.5 0 0 0-3.5 3.5v7a3.5 3.5 0 0 0 3.5 3.5H11V4.5z" />
                        <path d="M14.5 4.5H13v14h1.5a3.5 3.5 0 0 0 3.5-3.5v-7a3.5 3.5 0 0 0-3.5-3.5z" />
                        <path d="M9 9h2" />
                        <path d="M13 9h2" />
                        <path d="M9 12h2.5" />
                        <path d="M13 12h3" />
                        <path d="M9 15h2" />
                        <path d="M13 15h2.5" />
                    </svg>
                    </span>
                    <span class="nav-label">Optimizing for AI</span>
                </a>
            </li>
            <li class="nav-divider" aria-hidden="true"></li>
            <li class="nav-item">
                <a href="page15.html" class="nav-link" data-page="page15.html" title="Client Action Items">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M5 6h9" />
                        <path d="M5 12h9" />
                        <path d="M5 18h9" />
                        <path d="M16 7l2 2L22 5" />
                        <path d="M16 13l2 2L22 11" />
                    </svg>
                    </span>
                    <span class="nav-label">Client Action Items</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page16.html" class="nav-link" data-page="page16.html" title="LHD Action Items">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M6 5.5A2.5 2.5 0 0 1 8.5 3H20v15h-11.5A2.5 2.5 0 0 0 6 20.5z" />
                        <path d="M6 20.5A2.5 2.5 0 0 1 3.5 18V5.5A2.5 2.5 0 0 1 6 3h11" />
                        <path d="M9 7.5h7" />
                        <path d="M9 11h7" />
                    </svg>
                    </span>
                    <span class="nav-label">LHD Action Items</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page17.html" class="nav-link" data-page="page17.html" title="Client Feedback">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M19 15a3 3 0 0 1-3 3H9l-4 4v-4H5a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h11a3 3 0 0 1 3 3z" />
                        <path d="M8 9.5h7" />
                        <path d="M8 13h4" />
                        <circle cx="16.5" cy="12" r="1.5" />
                    </svg>
                    </span>
                    <span class="nav-label">Client Feedback</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="page18.html" class="nav-link" data-page="page18.html" title="CU Deployment">
                    <span class="nav-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M5 11l7-7 7 7" />
                        <path d="M6 15.5l6 4.5 6-4.5" />
                        <path d="M8.5 12.5l3.5 2.5 3.5-2.5" />
                    </svg>
                    </span>
                    <span class="nav-label">CU Deployment</span>
                </a>
            </li>
        </ul>
        <div class="nav-divider"></div>
        <div class="pdf-export-btn">
            <a href="#" class="pdf-link" onclick="exportToPDF(); return false;" title="Export to PDF">
                <span class="nav-icon">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M14 3H9a3 3 0 0 0-3 3v14a3 3 0 0 1 3-3h11" />
                        <path d="M14 3l5 5" />
                        <path d="M14 3v5h5" />
                        <path d="M12 14v7" />
                        <path d="M9.5 18.5L12 21l2.5-2.5" />
                    </svg>
                </span>
                <span class="nav-label">Export PDF</span>
            </a>
        </div>
    </nav>

    <div class="main-content">
        <div class="container">
            <div class="header">
                <h1>Leads & Conversion ðŸš€</h1>
                <div class="divider"></div>
            </div>

            <!-- Industry Benchmark -->
            <div class="benchmark-box">
                <svg class="benchmark-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                </svg>
                <div class="benchmark-text">Industry Standard Conversion Rate</div>
                <div class="benchmark-value">2-5%</div>
            </div>
            
            <!-- Lead Sources Breakdown -->
            <h2>Signed Cases in the past 3 months</h2>
            
            <!-- Lead Data Table -->
            <form id="leadsForm">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Month</th>
                            <th>Total Leads</th>
                            <th>Qualified Leads</th>
                            <th>Signed Cases</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- August -->
                        <tr>
                            <td class="label-cell" contenteditable="true" data-field="aug-month">August</td>
                            <td class="data-cell" contenteditable="true" data-field="aug-total">200</td>
                            <td class="data-cell" contenteditable="true" data-field="aug-qualified">103</td>
                            <td class="data-cell" contenteditable="true" data-field="aug-signed">13</td>
                        </tr>
                        <tr class="cvr-row">
                            <td class="label-cell">Conversion Rate</td>
                            <td class="cvr-cell" id="aug-cvr-total">6.50%</td>
                            <td class="cvr-cell" id="aug-cvr-qualified">12.60%</td>
                            <td></td>
                        </tr>

                        <!-- September -->
                        <tr>
                            <td class="label-cell" contenteditable="true" data-field="sept-month">September</td>
                            <td class="data-cell" contenteditable="true" data-field="sept-total">147</td>
                            <td class="data-cell" contenteditable="true" data-field="sept-qualified">22</td>
                            <td class="data-cell" contenteditable="true" data-field="sept-signed">12</td>
                        </tr>
                        <tr class="cvr-row">
                            <td class="label-cell">Conversion Rate</td>
                            <td class="cvr-cell" id="sept-cvr-total">-</td>
                            <td class="cvr-cell" id="sept-cvr-qualified">-</td>
                            <td></td>
                        </tr>

                        <!-- October -->
                        <tr>
                            <td class="label-cell" contenteditable="true" data-field="oct-month">October</td>
                            <td class="data-cell" contenteditable="true" data-field="oct-total">97</td>
                            <td class="data-cell" contenteditable="true" data-field="oct-qualified">47</td>
                            <td class="data-cell" contenteditable="true" data-field="oct-signed">21</td>
                        </tr>
                        <tr class="cvr-row">
                            <td class="label-cell">Conversion Rate</td>
                            <td class="cvr-cell" id="oct-cvr-total">-</td>
                            <td class="cvr-cell" id="oct-cvr-qualified">-</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </form>

            <div class="section-divider" aria-hidden="true"></div>

            <section class="insight-panel" aria-labelledby="insight-heading">
                <div class="insight-header">
                    <span class="insight-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path d="M4 9l6-6 4 4 6-6" />
                            <path d="M20 14v6h-6" />
                            <path d="M4 20l8-8" />
                        </svg>
                    </span>
                    <div>
                        <h2 class="insight-title" id="insight-heading">Key Insights</h2>
                        <p class="insight-subtitle">A snapshot of the strongest organic signals across landing pages.</p>
                    </div>
                </div>
                <div class="insight-grid">
                    <article class="insight-item">
                        <h3>October Momentum</h3>
                        <p>Organic landing pages produced 20 leads in October&mdash;the highest monthly total so far, signalling sustained growth into Q4.</p>
                    </article>
                    <article class="insight-item">
                        <h3>Flagship Performer</h3>
                        <p>The Google My Business destination drove 54 leads, accounting for roughly 59% of total landing-page conversions.</p>
                    </article>
                    <article class="insight-item">
                        <h3>Concentration of Demand</h3>
                        <p>The top three pages capture 69 of 91 organic leads (76%), highlighting the opportunity to double down on high-intent accident content.</p>
                    </article>
                </div>
            </section>

            <h2>Leads by Month</h2>

            <!-- Line Graph -->
            <div class="chart-container">
                <canvas id="leadsChart"></canvas>
            </div>

            <h2>Leads by Source</h2>
            
            <table class="sources-table">
                <thead>
                    <tr>
                        <th>Source</th>
                        <th>Total Leads</th>
                        <th>Qualified Leads</th>
                        <th>% of Qualified</th>
                    </tr>
                </thead>
                <tbody id="sources-tbody">
                    <tr draggable="true" data-row-id="gmb">
                        <td class="source-name data-cell" contenteditable="true" data-source-field="gmb-name">Google My Business</td>
                        <td class="data-cell" contenteditable="true" data-source-field="gmb-total">536</td>
                        <td class="data-cell" contenteditable="true" data-source-field="gmb-qualified">178</td>
                        <td class="percentage-cell" id="gmb-percentage">33.21%</td>
                    </tr>
                    <tr draggable="true" data-row-id="lsa">
                        <td class="source-name data-cell" contenteditable="true" data-source-field="lsa-name">Local Services Ads</td>
                        <td class="data-cell" contenteditable="true" data-source-field="lsa-total">525</td>
                        <td class="data-cell" contenteditable="true" data-source-field="lsa-qualified">348</td>
                        <td class="percentage-cell" id="lsa-percentage">66.29%</td>
                    </tr>
                    <tr draggable="true" data-row-id="organic">
                        <td class="source-name data-cell" contenteditable="true" data-source-field="organic-name">Organic</td>
                        <td class="data-cell" contenteditable="true" data-source-field="organic-total">540</td>
                        <td class="data-cell" contenteditable="true" data-source-field="organic-qualified">328</td>
                        <td class="percentage-cell" id="organic-percentage">60.74%</td>
                    </tr>
                    <tr draggable="true" data-row-id="direct">
                        <td class="source-name data-cell" contenteditable="true" data-source-field="direct-name">Direct</td>
                        <td class="data-cell" contenteditable="true" data-source-field="direct-total">134</td>
                        <td class="data-cell" contenteditable="true" data-source-field="direct-qualified">38</td>
                        <td class="percentage-cell" id="direct-percentage">28.36%</td>
                    </tr>
                    <tr draggable="true" data-row-id="ai">
                        <td class="source-name data-cell" contenteditable="true" data-source-field="ai-name">AI Tools</td>
                        <td class="data-cell" contenteditable="true" data-source-field="ai-total">17</td>
                        <td class="data-cell" contenteditable="true" data-source-field="ai-qualified">14</td>
                        <td class="percentage-cell" id="ai-percentage">82.35%</td>
                    </tr>
                    <tr draggable="true" data-row-id="referral">
                        <td class="source-name data-cell" contenteditable="true" data-source-field="referral-name">Referral Site</td>
                        <td class="data-cell" contenteditable="true" data-source-field="referral-total">23</td>
                        <td class="data-cell" contenteditable="true" data-source-field="referral-qualified">3</td>
                        <td class="percentage-cell" id="referral-percentage">13.04%</td>
                    </tr>
                    <tr class="total-row">
                        <td class="source-name">Total</td>
                        <td id="total-leads">1779</td>
                        <td id="total-qualified">909</td>
                        <td id="total-percentage">51.10%</td>
                    </tr>
                </tbody>
            </table>

            <!-- Highlight Callout -->
            <div class="highlight-callout">
                <div class="highlight-callout-text">
                    ðŸ’¡ <strong>Key Insight:</strong> Over half (51.10%) of total leads are qualified leads - 
                    demonstrating high-quality traffic and effective lead generation!
                </div>
            </div>
            
            <h2>Leads by Landing Page (Organic SEO)</h2>
            <div class="table-scroll">
                <table class="landing-table">
                    <thead>
                        <tr>
                            <th>SEO Landing Page</th>
                            <th>Mar</th>
                            <th>Apr</th>
                            <th>May</th>
                            <th>Jun</th>
                            <th>Jul</th>
                            <th>Aug</th>
                            <th>Sep</th>
                            <th>Oct</th>
                            <th>Grand Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="source-name"><a href="https://oklahomalawyer.com/?utm_campaign=GoogleMyBusiness" target="_blank" rel="noopener noreferrer">https://oklahomalawyer.com/?utm_campaign=GoogleMyBusiness</a></td>
                            <td>-</td>
                            <td><span class="has-leads">4</span></td>
                            <td><span class="has-leads">10</span></td>
                            <td><span class="has-leads">8</span></td>
                            <td><span class="has-leads">7</span></td>
                            <td><span class="has-leads">8</span></td>
                            <td><span class="has-leads">6</span></td>
                            <td><span class="has-leads">11</span></td>
                            <td>54</td>
                        </tr>
                        <tr>
                            <td class="source-name"><a href="https://oklahomalawyer.com/oklahoma-city-governmental-tort-claims/" target="_blank" rel="noopener noreferrer">https://oklahomalawyer.com/oklahoma-city-governmental-tort-claims/</a></td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td><span class="has-leads">3</span></td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">2</span></td>
                            <td><span class="has-leads">1</span></td>
                            <td><span class="has-leads">1</span></td>
                            <td>8</td>
                        </tr>
                        <tr>
                            <td class="source-name"><a href="https://oklahomalawyer.com/oklahoma-city-car-accident-lawyer/" target="_blank" rel="noopener noreferrer">https://oklahomalawyer.com/oklahoma-city-car-accident-lawyer/</a></td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">2</span></td>
                            <td>-</td>
                            <td><span class="has-leads">4</span></td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td>7</td>
                        </tr>
                        <tr>
                            <td class="source-name"><a href="https://oklahomalawyer.com/" target="_blank" rel="noopener noreferrer">https://oklahomalawyer.com/</a></td>
                            <td><span class="has-leads">1</span></td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">2</span></td>
                            <td><span class="has-leads">1</span></td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td>5</td>
                        </tr>
                        <tr>
                            <td class="source-name"><a href="https://oklahomalawyer.com/oklahoma-city-car-accident-lawyer/how-much-compensation-for-a-car-accident/" target="_blank" rel="noopener noreferrer">https://oklahomalawyer.com/oklahoma-city-car-accident-lawyer/how-much-compensation-for-a-car-accident/</a></td>
                            <td>-</td>
                            <td><span class="has-leads">2</span></td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td>4</td>
                        </tr>
                        <tr>
                            <td class="source-name"><a href="https://oklahomalawyer.com/slip-and-fall-cases-against-walmart-oklahoma-city/" target="_blank" rel="noopener noreferrer">https://oklahomalawyer.com/slip-and-fall-cases-against-walmart-oklahoma-city/</a></td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">2</span></td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td>4</td>
                        </tr>
                        <tr>
                            <td class="source-name"><a href="https://oklahomalawyer.com/oklahoma-city-car-accident-lawyer/totaled-vehicle/" target="_blank" rel="noopener noreferrer">https://oklahomalawyer.com/oklahoma-city-car-accident-lawyer/totaled-vehicle/</a></td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td><span class="has-leads">1</span></td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td class="source-name"><a href="https://oklahomalawyer.com/blog/defective-medical-device-claims-guide/" target="_blank" rel="noopener noreferrer">https://oklahomalawyer.com/blog/defective-medical-device-claims-guide/</a></td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td><span class="has-leads">1</span></td>
                            <td><span class="has-leads">1</span></td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td class="source-name"><a href="https://oklahomalawyer.com/oklahoma-city-slip-and-fall-lawyer/" target="_blank" rel="noopener noreferrer">https://oklahomalawyer.com/oklahoma-city-slip-and-fall-lawyer/</a></td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td><span class="has-leads">1</span></td>
                            <td>-</td>
                            <td><span class="has-leads">2</span></td>
                            <td>3</td>
                        </tr>
                        <tr class="total-row">
                            <td class="source-name">Total</td>
                            <td>1</td>
                            <td>8</td>
                            <td>15</td>
                            <td>10</td>
                            <td>16</td>
                            <td>13</td>
                            <td>8</td>
                            <td>20</td>
                            <td>91</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Issues/Concerns Section -->
            <div class="section-divider" aria-hidden="true"></div>
            
            <div>
                <h2 class="section-header">Issues/Concerns</h2>
                <textarea 
                    id="issues-concerns-page4" 
                    class="text-area"
                    placeholder="Enter any issues or concerns here..."
                    onblur="autoSavePage4()"
                ></textarea>
            </div>

            <!-- Action Items Section -->
            <div>
                <h2 class="section-header">Action Items</h2>
                <textarea 
                    id="action-items-page4" 
                    class="text-area"
                    placeholder="Enter action items here..."
                    onblur="autoSavePage4()"
                ></textarea>
            </div>
        </div>
    </div>

    <script>
        // Load saved data on page load
        window.addEventListener('DOMContentLoaded', function() {
            const savedData = localStorage.getItem('leadsData');
            if (savedData) {
                const data = JSON.parse(savedData);
                // Restore all editable cell values
                Object.keys(data).forEach(field => {
                    const cell = document.querySelector(`[data-field="${field}"]`);
                    if (cell) {
                        cell.textContent = data[field];
                    }
                });
                calculateRates();
            }

            // Load saved notes
            const savedNotes = localStorage.getItem('page4Notes');
            if (savedNotes) {
                const notes = JSON.parse(savedNotes);
                if (notes.issues) {
                    document.getElementById('issues-concerns-page4').value = notes.issues;
                }
                if (notes.actions) {
                    document.getElementById('action-items-page4').value = notes.actions;
                }
            }
        });

        function calculateRates() {
            // Get values from contenteditable cells
            const augTotal = parseFloat(document.querySelector('[data-field="aug-total"]').textContent) || 0;
            const augQualified = parseFloat(document.querySelector('[data-field="aug-qualified"]').textContent) || 0;
            const augSigned = parseFloat(document.querySelector('[data-field="aug-signed"]').textContent) || 0;
            
            const septTotal = parseFloat(document.querySelector('[data-field="sept-total"]').textContent) || 0;
            const septQualified = parseFloat(document.querySelector('[data-field="sept-qualified"]').textContent) || 0;
            const septSigned = parseFloat(document.querySelector('[data-field="sept-signed"]').textContent) || 0;
            
            const octTotal = parseFloat(document.querySelector('[data-field="oct-total"]').textContent) || 0;
            const octQualified = parseFloat(document.querySelector('[data-field="oct-qualified"]').textContent) || 0;
            const octSigned = parseFloat(document.querySelector('[data-field="oct-signed"]').textContent) || 0;
            
            // August calculations
            if (augSigned > 0 && augTotal > 0) {
                const augCvrTotal = ((augSigned / augTotal) * 100).toFixed(2);
                const augCvrQualified = augQualified > 0 ? ((augSigned / augQualified) * 100).toFixed(2) : '0.00';
                document.getElementById('aug-cvr-total').textContent = augCvrTotal + '%';
                document.getElementById('aug-cvr-qualified').textContent = augCvrQualified + '%';
            }
            
            // September calculations
            if (septSigned > 0 && septTotal > 0) {
                const septCvrTotal = ((septSigned / septTotal) * 100).toFixed(2);
                const septCvrQualified = septQualified > 0 ? ((septSigned / septQualified) * 100).toFixed(2) : '0.00';
                document.getElementById('sept-cvr-total').textContent = septCvrTotal + '%';
                document.getElementById('sept-cvr-qualified').textContent = septCvrQualified + '%';
            } else {
                document.getElementById('sept-cvr-total').textContent = '-';
                document.getElementById('sept-cvr-qualified').textContent = '-';
            }
            
            // October calculations
            if (octSigned > 0 && octTotal > 0) {
                const octCvrTotal = ((octSigned / octTotal) * 100).toFixed(2);
                const octCvrQualified = octQualified > 0 ? ((octSigned / octQualified) * 100).toFixed(2) : '0.00';
                document.getElementById('oct-cvr-total').textContent = octCvrTotal + '%';
                document.getElementById('oct-cvr-qualified').textContent = octCvrQualified + '%';
            } else {
                document.getElementById('oct-cvr-total').textContent = '-';
                document.getElementById('oct-cvr-qualified').textContent = '-';
            }
        }

        function autoSaveData() {
            const data = {};
            document.querySelectorAll('[data-field]').forEach(cell => {
                data[cell.getAttribute('data-field')] = cell.textContent;
            });
            
            localStorage.setItem('leadsData', JSON.stringify(data));
            calculateRates();
        }

        function autoSavePage4() {
            const notes = {
                issues: document.getElementById('issues-concerns-page4').value,
                actions: document.getElementById('action-items-page4').value
            };
            
            localStorage.setItem('page4Notes', JSON.stringify(notes));
        }

        // Add event listeners to all editable cells
        document.querySelectorAll('[contenteditable="true"]').forEach(cell => {
            cell.addEventListener('blur', autoSaveData);
            cell.addEventListener('input', calculateRates);
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const current = (window.location.pathname.split('/').pop() || 'page1.html').toLowerCase();
            document.querySelectorAll('.nav-link[data-page]').forEach(link => {
                if ((link.dataset.page || '').toLowerCase() === current) {
                    link.classList.add('active');
                    link.setAttribute('aria-current', 'page');
                }
            });
        });
    </script>



    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script>
        // Create the line chart
        const ctx = document.getElementById('leadsChart').getContext('2d');
        const leadsChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['March', 'April', 'May', 'June', 'July', 'August', 'September', 'October'],
                datasets: [{
                    // added a second line in legend label (assumption: show 'Monthly' on next line)
                    label: 'Unique Leads\nMonthly',
                    data: [1, 19, 19, 21, 23, 26, 15, 21],
                    borderColor: '#0445ac',
                    backgroundColor: 'rgba(4, 69, 172, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true,
                    pointRadius: 6,
                    pointHoverRadius: 8,
                    pointBackgroundColor: '#0445ac',
                    pointBorderColor: '#ffffff',
                    pointBorderWidth: 2,
                    pointHoverBackgroundColor: '#0445ac',
                    pointHoverBorderColor: '#ffffff',
                    pointHoverBorderWidth: 3,
                    datalabels: {
                        align: 'top',
                        anchor: 'end',
                        offset: 8,
                        font: {
                            family: '-apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif',
                            size: 13,
                            weight: '600'
                        },
                        color: '#1d1d1f',
                        formatter: function(value) {
                            return value;
                        }
                    }
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                aspectRatio: 2.5,
                layout: {
                    padding: {
                        top: 30
                    }
                },
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        align: 'start',
                        labels: {
                            font: {
                                family: '-apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif',
                                size: 14,
                                weight: '600'
                            },
                            color: '#1d1d1f',
                            padding: 20,
                            usePointStyle: true,
                            pointStyle: 'circle'
                        },
                        padding: {
                            bottom: 20
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(29, 29, 31, 0.95)',
                        titleFont: {
                            family: '-apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif',
                            size: 13,
                            weight: '600'
                        },
                        bodyFont: {
                            family: '-apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif',
                            size: 14,
                            weight: '500'
                        },
                        padding: 12,
                        cornerRadius: 8,
                        displayColors: false,
                        callbacks: {
                            label: function(context) {
                                return 'Leads: ' + context.parsed.y;
                            }
                        }
                    },
                    datalabels: {
                        display: true
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            font: {
                                family: '-apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif',
                                size: 13
                            },
                            color: 'rgba(29, 29, 31, 0.7)',
                            padding: 8
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.06)',
                            drawBorder: false
                        },
                        border: {
                            display: false
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                family: '-apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif',
                                size: 13,
                                weight: '500'
                            },
                            color: '#1d1d1f',
                            padding: 8
                        },
                        grid: {
                            display: false,
                            drawBorder: false
                        },
                        border: {
                            display: false
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                }
            },
            plugins: [ChartDataLabels]
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" referrerpolicy="no-referrer"></script>
    <script src="pdf-export.js"></script>

    <script>
        // Sources table auto-calculation functions
        function calculateSourcePercentages() {
            const sources = ['gmb', 'lsa', 'organic', 'direct', 'ai', 'referral'];
            
            sources.forEach(source => {
                const totalCell = document.querySelector(`[data-source-field="${source}-total"]`);
                const qualifiedCell = document.querySelector(`[data-source-field="${source}-qualified"]`);
                const percentageCell = document.getElementById(`${source}-percentage`);
                
                if (totalCell && qualifiedCell && percentageCell) {
                    const total = parseFloat(totalCell.textContent) || 0;
                    const qualified = parseFloat(qualifiedCell.textContent) || 0;
                    
                    if (total > 0) {
                        const percentage = ((qualified / total) * 100).toFixed(2);
                        percentageCell.textContent = percentage + '%';
                    } else {
                        percentageCell.textContent = '0.00%';
                    }
                }
            });
            
            calculateSourceTotals();
        }
        
        function calculateSourceTotals() {
            const sources = ['gmb', 'lsa', 'organic', 'direct', 'ai', 'referral'];
            let totalLeads = 0;
            let totalQualified = 0;
            
            sources.forEach(source => {
                const totalCell = document.querySelector(`[data-source-field="${source}-total"]`);
                const qualifiedCell = document.querySelector(`[data-source-field="${source}-qualified"]`);
                
                if (totalCell && qualifiedCell) {
                    totalLeads += parseFloat(totalCell.textContent) || 0;
                    totalQualified += parseFloat(qualifiedCell.textContent) || 0;
                }
            });
            
            // Update total row
            document.getElementById('total-leads').textContent = totalLeads;
            document.getElementById('total-qualified').textContent = totalQualified;
            
            // Calculate total percentage
            if (totalLeads > 0) {
                const totalPercentage = ((totalQualified / totalLeads) * 100).toFixed(2);
                document.getElementById('total-percentage').textContent = totalPercentage + '%';
            } else {
                document.getElementById('total-percentage').textContent = '0.00%';
            }
        }
        
        function autoSaveSourcesData() {
            const data = {};
            document.querySelectorAll('.sources-table [data-source-field]').forEach(cell => {
                data[cell.getAttribute('data-source-field')] = cell.textContent;
            });
            
            // Save row order
            const rowOrder = [];
            document.querySelectorAll('#sources-tbody tr[data-row-id]').forEach(row => {
                rowOrder.push(row.getAttribute('data-row-id'));
            });
            data.rowOrder = rowOrder;
            
            localStorage.setItem('sourcesData', JSON.stringify(data));
            calculateSourcePercentages();
        }
        
        // Load saved sources data on page load
        window.addEventListener('DOMContentLoaded', function() {
            const savedSourcesData = localStorage.getItem('sourcesData');
            if (savedSourcesData) {
                const data = JSON.parse(savedSourcesData);
                
                // Restore row order if saved
                if (data.rowOrder) {
                    const tbody = document.getElementById('sources-tbody');
                    const totalRow = tbody.querySelector('.total-row');
                    const rows = {};
                    
                    // Collect all rows by their ID
                    tbody.querySelectorAll('tr[data-row-id]').forEach(row => {
                        rows[row.getAttribute('data-row-id')] = row;
                    });
                    
                    // Clear tbody (except total row)
                    tbody.querySelectorAll('tr[data-row-id]').forEach(row => row.remove());
                    
                    // Re-add rows in saved order
                    data.rowOrder.forEach(rowId => {
                        if (rows[rowId]) {
                            tbody.insertBefore(rows[rowId], totalRow);
                        }
                    });
                }
                
                // Restore cell values
                Object.keys(data).forEach(field => {
                    if (field !== 'rowOrder') {
                        const cell = document.querySelector(`[data-source-field="${field}"]`);
                        if (cell) {
                            cell.textContent = data[field];
                        }
                    }
                });
                calculateSourcePercentages();
            }
        });
        
        // Add event listeners to all editable cells in sources table
        document.querySelectorAll('.sources-table [contenteditable="true"]').forEach(cell => {
            cell.addEventListener('blur', autoSaveSourcesData);
            cell.addEventListener('input', calculateSourcePercentages);
        });
        
        // Drag and Drop functionality for sources table
        let draggedRow = null;
        
        document.querySelectorAll('#sources-tbody tr[draggable="true"]').forEach(row => {
            row.addEventListener('dragstart', function(e) {
                draggedRow = this;
                this.classList.add('dragging');
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/html', this.innerHTML);
            });
            
            row.addEventListener('dragend', function(e) {
                this.classList.remove('dragging');
                document.querySelectorAll('#sources-tbody tr').forEach(r => {
                    r.classList.remove('drag-over');
                });
                autoSaveSourcesData();
            });
            
            row.addEventListener('dragover', function(e) {
                if (e.preventDefault) {
                    e.preventDefault();
                }
                e.dataTransfer.dropEffect = 'move';
                
                if (this !== draggedRow && this.getAttribute('draggable') === 'true') {
                    this.classList.add('drag-over');
                }
                return false;
            });
            
            row.addEventListener('dragleave', function(e) {
                this.classList.remove('drag-over');
            });
            
            row.addEventListener('drop', function(e) {
                if (e.stopPropagation) {
                    e.stopPropagation();
                }
                
                if (draggedRow !== this && this.getAttribute('draggable') === 'true') {
                    const tbody = document.getElementById('sources-tbody');
                    const allRows = Array.from(tbody.querySelectorAll('tr[draggable="true"]'));
                    const draggedIndex = allRows.indexOf(draggedRow);
                    const targetIndex = allRows.indexOf(this);
                    
                    if (draggedIndex < targetIndex) {
                        this.parentNode.insertBefore(draggedRow, this.nextSibling);
                    } else {
                        this.parentNode.insertBefore(draggedRow, this);
                    }
                }
                
                this.classList.remove('drag-over');
                return false;
            });
        });
    </script>
</body>
</html>

